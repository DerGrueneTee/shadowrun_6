<div>
  <!-- Fertigkeitswert: data.value; Schwierigkeit: data.threshold; Modifikation: data.modifier; WÃ¼rfelergebnis: data.dieResult; Gesamt: data.total-->
  
  <h3>{{data.actionText}}</h3> 
  {{#if data.isOpposed}}
  <div class="chat-edge" style="display:block">
    <div>{{data.edge_message}}</div>
    {{#if data.edge_use}}
    <div style="color: var(--highlight-color)">{{data.edge_use}}</div>
    {{/if}}
  <div class="chat-edge-collapsible" style="display:none">
    <header class="part-header flexrow">
      <div>{{ localize 'shadowrun6.derived.attack_rating'}}: <b>{{data.attackRating}}</b></div>
      <br/>
      <div>{{ localize 'shadowrun6.derived.defense_rating'}}: <b>{{data.defRating}}</b></div>
    </header>
  </div>
  </div>
  <hr/>
   {{/if}}        
  
  <div class="dice-roll">
    <div class="dice-result">
      <header class="part-header flexrow">
        {{{tooltip}}}
        <div>{{formula}}</div>
        <br/>
        {{#if success}}
        <div>{{ localize 'shadowrun6.roll.success'}}: <b>{{total}}</b> {{localize 'shadowrun6.roll.successes'}}</div>
        {{else}}
        <div>{{ localize 'shadowrun6.roll.failure'}}: </b>{{total}}</b> {{localize 'shadowrun6.roll.nosuccess'}} {{data.threshold}}</div>
        {{/if}} 
        <br/>
        {{#if criticalGlitch}}
        <span style="color: rgb(215, 14, 233)">{{localize 'shadowrun6.roll.criticalglitch'}}</span><br/>
        {{else glitch}}
        <span style="color: rgb(194, 76, 29)">{{localize 'shadowrun6.roll.glitch'}}</span><br/>
        {{/if}}
      </header>
    </div>
   </div>
   
   <!-- Usage Details -->
  	{{#if data.weapon}}
   <hr/>
   <div>
     <b>{{localize 'shadowrun6.roll.damage'}}</b> {{data.item.data.data.dmgDef}}
   </div>
   {{/if}}        
   
   <!-- Drain -->
   {{#if (eq data.rollType "spell")}}
   <hr/>
    {{log data.spell}}
   <div>
   	<table class="spell-table">
   	    <tr>
   	    	<th>{{localize 'shadowrun6.spell.range'}}</th>
            <th>{{localize 'shadowrun6.spell.type'}}</th>
            <th>{{localize 'shadowrun6.spell.duration_short'}}</th>
            <th>{{localize 'shadowrun6.spell.drain'}}</th>
            <th>{{localize 'shadowrun6.spell.damage_short'}}</th>
   	    </tr>
   	  	<tr>
   	  		<td>{{localize (concat (concat 'shadowrun6.spell.range_' data.spell.data.data.range) "_short")}}</td>
   	  		<td>{{localize (concat (concat 'shadowrun6.spell.type_' data.spell.data.data.type) "_short")}}</td>
   	  		<td>{{localize (concat (concat 'shadowrun6.spell.duration_' data.spell.data.data.duration) "_short")}}</td>
    	  		<td>{{data.spell.data.data.drain}}</td>
   	  		<td></td>
   	  	</tr>
   	</table>
  	  <span style="color:red">Work in progress</span>
   </div>
   {{/if}}        
   
   <!-- Defense -->
   {{#if data.isAllowDefense}}
   <hr/>
  <div>
  	<button class="rollable" data-roll-type="defense" data-defend-with="{{data.defendWith}}" data-targetid="{{data.targetId}}">Roll Defense</button>
  </div>
   {{/if}}        
</div>